{% extends 'layout.html' %}

{% block content %}

{% import 'macros/_navbar.html' as ui with context %}
{{ ui.navbar() }}

<!-- Hero Banner -->
<section class="hero-banner bg-primary text-white text-center py-5 mb-4">
  <div class="container">
    <h1 class="display-4 fw-bold">Welcome to Buxxel</h1>
    <p class="lead">Discover unique listings, connect with sellers, and shop securely.</p>
    <a href="{{ url_for('users_bp.register') }}" class="btn btn-light btn-lg mt-3">Join Now</a>
  </div>
</section>

<!-- Horizontally Scrolling Categories Bar -->
<div class="popular-tags-bar bg-light shadow-sm py-2 mb-4">
  <div class="container-fluid d-flex align-items-center">
    <span class="text-muted me-3 flex-shrink-0">Popular Tags:</span>
    <div class="tags-scroll-wrapper">
      <div id="popular-tags-container" class="d-flex flex-nowrap"></div>
    </div>
  </div>
</div>

<main class="container">
  <!-- Featured Categories -->
  <section class="mb-5">
    <h2 class="mb-4 text-center">Browse Categories</h2>
    <div class="row text-center">
      <div class="col-md-3 mb-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <i class="bi bi-phone display-4 text-primary"></i>
            <h5 class="mt-3">Electronics</h5>
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <i class="bi bi-bag display-4 text-success"></i>
            <h5 class="mt-3">Fashion</h5>
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <i class="bi bi-house display-4 text-warning"></i>
            <h5 class="mt-3">Home & Garden</h5>
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <i class="bi bi-people display-4 text-danger"></i>
            <h5 class="mt-3">Services</h5>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Listings Grid -->
  <section>
    <h2 class="mb-4 text-center">Latest Listings</h2>
    <div class="row g-4" id="listing-grid">
      <!-- Product cards dynamically injected by app.js -->
    </div>
    {% if error %}
      <div class="text-center p-5">
        <h4 class="text-danger">{{ error }}</h4>
      </div>
    {% endif %}
  </section>

  <!-- Pagination Controls -->
  <div id="load-more-container" class="text-center mt-5">
    {% if has_next %}
      <button id="load-more-btn" class="btn btn-primary btn-lg" data-next-page="2">Load More Listings</button>
    {% endif %}
  </div>

  <!-- Trust Signals -->
  <section class="my-5 text-center">
    <div class="row">
      <div class="col-md-4">
        <i class="bi bi-star-fill text-warning display-5"></i>
        <h5 class="mt-2">Trusted Reviews</h5>
        <p class="text-muted">See what other buyers are saying.</p>
      </div>
      <div class="col-md-4">
        <i class="bi bi-shield-lock-fill text-success display-5"></i>
        <h5 class="mt-2">Secure Payments</h5>
        <p class="text-muted">Shop with confidence and protection.</p>
      </div>
      <div class="col-md-4">
        <i class="bi bi-truck text-primary display-5"></i>
        <h5 class="mt-2">Fast Delivery</h5>
        <p class="text-muted">Get your items quickly and reliably.</p>
      </div>
    </div>
  </section>

  <!-- Purveyor CTA Section (for guests only, hidden by default) -->
  <section id="guest-cta-section" class="my-5" style="display: none;">
    <div class="card text-center bg-light border-0">
      <div class="card-body p-4">
        <h4 class="card-title">Ready to sell on Buxxel?</h4>
        <p class="card-text">Join our community of purveyors and start reaching customers today.</p>
        <a href="#" id="create-listing-cta" class="btn btn-warning">Create a Listing</a>
      </div>
    </div>
  </section>
</main>

<footer class="bg-dark text-white text-center p-3 mt-5">
  <p>&copy; 2024 Buxxel. All Rights Reserved.</p>
</footer>
{% endblock %}
